plugins {
    id "com.gradle.build-scan" version "1.15.2"
    id "org.sonarqube" version "2.6.2"
    id "com.github.kt3k.coveralls" version "2.6.3"
}

buildScan {
    termsOfServiceUrl = "https://gradle.com/terms-of-service"
    termsOfServiceAgree = "yes"
}

sonarqube {
    properties {
        property "sonar.projectName", "Australia Rent"
        property "sonar.projectKey", "thomashan.github.io:australia-rent"
    }
}

version project.VERSION

apply plugin: "groovy"
apply plugin: "eclipse"
apply plugin: "idea"
apply plugin: "jacoco"

repositories {
    mavenLocal()
    mavenCentral()
}

sourceCompatibility = 1.9
targetCompatibility = 1.9
group "thomashan.github.io"

ext {
    gebVersion = "2.2"
    seleniumVersion = "3.12.0"
    groovyBaseVersion = "2.5"
    groovyFullVersion = "2.5.4"
}

dependencies {
    compile("org.codehaus.groovy:groovy-all:${groovyFullVersion}") {
        exclude(group: "junit")
    }

    compile "org.gebish:geb-spock:${gebVersion}"
    compile "org.gebish:geb-core:${gebVersion}"
    compile "org.spockframework:spock-core:1.2-groovy-${groovyBaseVersion}"
    compile "org.seleniumhq.selenium:selenium-firefox-driver:3.141.59"
    compile "org.seleniumhq.selenium:selenium-support:3.141.59"
}

compileGroovy {
    groovyOptions.optimizationOptions.indy = true
}

test {
    useJUnitPlatform()
}

jacocoTestReport {
    reports {
        xml.enabled = true // coveralls plugin depends on xml format report
        html.enabled = true
    }
}

jacoco {
    toolVersion = "0.8.2"
    reportsDir = file("$buildDir/customJacocoReportDir")
}

